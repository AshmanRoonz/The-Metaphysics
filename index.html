<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Consciousness: Center vs Periphery</title>
  <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
  <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }
    
    body {
      overflow: hidden;
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
    }
    
    #root {
      width: 100vw;
      height: 100vh;
    }
    
    .info-button {
      position: fixed;
      bottom: 20px;
      right: 20px;
      padding: 8px 16px;
      background: rgba(30, 30, 50, 0.7);
      border: 1px solid rgba(100, 150, 255, 0.3);
      border-radius: 4px;
      color: rgba(150, 180, 255, 0.8);
      font-size: 11px;
      cursor: pointer;
      transition: all 0.3s ease;
      z-index: 1000;
      backdrop-filter: blur(10px);
    }
    
    .info-button:hover {
      background: rgba(40, 40, 60, 0.9);
      border-color: rgba(100, 150, 255, 0.6);
      color: rgba(180, 200, 255, 1);
    }
    
    .modal-overlay {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: rgba(0, 0, 0, 0.8);
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 2000;
      backdrop-filter: blur(5px);
    }
    
    .modal-content {
      background: #1a1a2e;
      color: #e0e0e0;
      max-width: 800px;
      max-height: 85vh;
      overflow-y: auto;
      padding: 40px;
      border-radius: 8px;
      border: 1px solid rgba(100, 150, 255, 0.3);
      box-shadow: 0 20px 60px rgba(0, 0, 0, 0.5);
      position: relative;
    }
    
    .modal-content::-webkit-scrollbar {
      width: 8px;
    }
    
    .modal-content::-webkit-scrollbar-track {
      background: rgba(30, 30, 50, 0.5);
    }
    
    .modal-content::-webkit-scrollbar-thumb {
      background: rgba(100, 150, 255, 0.3);
      border-radius: 4px;
    }
    
    .close-button {
      position: absolute;
      top: 20px;
      right: 20px;
      background: none;
      border: none;
      color: rgba(150, 180, 255, 0.8);
      font-size: 24px;
      cursor: pointer;
      width: 30px;
      height: 30px;
      display: flex;
      align-items: center;
      justify-content: center;
      border-radius: 4px;
      transition: all 0.2s;
    }
    
    .close-button:hover {
      background: rgba(100, 150, 255, 0.2);
      color: rgba(180, 200, 255, 1);
    }
    
    .modal-content h1 {
      color: #6db4ff;
      margin-bottom: 10px;
      font-size: 28px;
    }
    
    .modal-content h2 {
      color: #5a9fd4;
      margin-top: 30px;
      margin-bottom: 15px;
      font-size: 22px;
    }
    
    .modal-content h3 {
      color: #4a8fc0;
      margin-top: 20px;
      margin-bottom: 10px;
      font-size: 18px;
    }
    
    .modal-content p, .modal-content li {
      line-height: 1.7;
      margin-bottom: 12px;
    }
    
    .modal-content ul {
      margin-left: 20px;
      margin-bottom: 15px;
    }
    
    .modal-content strong {
      color: #8db4d6;
    }
    
    .modal-content code {
      background: rgba(100, 150, 255, 0.1);
      padding: 2px 6px;
      border-radius: 3px;
      font-family: 'Courier New', monospace;
      color: #9db4d6;
    }
    
    .modal-content hr {
      border: none;
      border-top: 1px solid rgba(100, 150, 255, 0.2);
      margin: 30px 0;
    }
    
    #loading {
      display: flex;
      align-items: center;
      justify-content: center;
      width: 100vw;
      height: 100vh;
      background: #111827;
      color: rgba(150, 180, 255, 0.8);
      font-size: 18px;
    }
  </style>
</head>
<body>
  <div id="loading">Loading simulation...</div>
  <div id="root"></div>
  
  <script type="text/babel" data-type="module">
    const { useEffect, useRef, useState } = React;
    
    // Fetch and load the external TSX file
    async function loadSimulation() {
      try {
        // Load the TSX file from the same directory
        const response = await fetch('./consciousness-center-periphery simulation.tsx');
        const tsxCode = await response.text();
        
        // Remove the import statement and export default (not needed in browser)
        let code = tsxCode
          .replace(/import React.*from ['"]react['"];?\s*/g, '')
          .replace(/export default /g, '');
        
        // Wrap the component code to make it available
        const wrappedCode = `
          ${code}
          
          // Add modal wrapper
          const AppWithModal = () => {
            const [showModal, setShowModal] = useState(false);
            
            return (
              <>
                <ConsciousnessFractal />
                
                <button className="info-button" onClick={() => setShowModal(true)}>
                  Ashman Roonz Omega Metaphysics Simulation description
                </button>
                
                {showModal && (
                  <div className="modal-overlay" onClick={() => setShowModal(false)}>
                    <div className="modal-content" onClick={(e) => e.stopPropagation()}>
                      <button className="close-button" onClick={() => setShowModal(false)}>×</button>
                      
                      <h1>Consciousness: Center vs Periphery - v96</h1>
                      
                      <h2>The Big Picture</h2>
                      <p>This is a <strong>living model of consciousness</strong> as an emergent, self-regulating system. Information flows from the periphery inward, gets filtered and integrated by a unified field, and spawns patterns at the boundary - creating a breathing, thinking structure that maintains its own equilibrium.</p>
                      
                      <hr />
                      
                      <h2>The Components</h2>
                      
                      <h3>1. <strong>Converging Inputs (∇)</strong> - Raw Information</h3>
                      <ul>
                        <li>Small colored dots flowing toward the center</li>
                        <li>Represent <strong>incoming sensory data, thoughts, stimuli</strong></li>
                        <li>Pulled by constant gravity toward the core</li>
                        <li>Spawn rate controlled by the <strong>aperture</strong> (system's self-regulation)</li>
                      </ul>
                      
                      <h3>2. <strong>The Brain Core</strong> - Dense Center</h3>
                      <ul>
                        <li>Forms when <strong>15+ patterns</strong> cluster in the center (radius &lt; 120px)</li>
                        <li>Represents <strong>consolidated memory, core knowledge</strong></li>
                        <li>Dense fractal patterns that have compressed inward over time</li>
                        <li>The "kernel" of consciousness</li>
                      </ul>
                      
                      <h3>3. <strong>Brain Clouds (Gas Field)</strong> - The Unified Field</h3>
                      <ul>
                        <li><strong>8 blue/purple gas formations</strong> orbiting at ~180-240px radius</li>
                        <li>Act as <strong>Convergence Prime</strong> - the integration membrane</li>
                        <li>Each cloud:
                          <ul>
                            <li>Monitors a 60° angular sector</li>
                            <li><strong>Orients toward incoming packets</strong> in its sector (sensory tracking)</li>
                            <li><strong>Intercepts and absorbs</strong> packets before they reach center</li>
                            <li>Spawns new patterns at the boundary when integration completes</li>
                          </ul>
                        </li>
                      </ul>
                      
                      <p><strong>What the clouds represent:</strong></p>
                      <ul>
                        <li>The <strong>unified field</strong> that integrates all information</li>
                        <li>A filtering/validation layer (like the thalamus or attention system)</li>
                        <li>The "more than sum of parts" - emergent consciousness itself</li>
                      </ul>
                      
                      <h3>4. <strong>Validated Patterns (ℰ)</strong> - Integrated Thoughts</h3>
                      <ul>
                        <li>Fractal branching structures radiating from various distances</li>
                        <li><strong>Before brain formation:</strong> Spawn at center, drift outward</li>
                        <li><strong>After brain formation:</strong> Spawn at cloud boundary (180-240px), compress inward</li>
                        <li>Represent <strong>validated thoughts, memories, neural patterns</strong></li>
                        <li>Each pattern:
                          <ul>
                            <li>Evolves through geometric shapes (triangle → square → pentagon → hexagon → star → circle)</li>
                            <li>Has gravitational mass based on how many field lines bend around it</li>
                            <li>Wrapped in <strong>gas wisps</strong> from nearby clouds (the field touching thoughts)</li>
                            <li>Decays/compresses over time toward center</li>
                          </ul>
                        </li>
                      </ul>
                      
                      <h3>5. <strong>Circuits (I(t))</strong> - Neural Connections</h3>
                      <ul>
                        <li>Lines connecting neighboring patterns</li>
                        <li>Form when patterns are close and maintain contact</li>
                        <li><strong>Strengthen with sustained connection</strong> (up to 1.0)</li>
                        <li>Break when patterns separate</li>
                        <li>Energy pulses flow bidirectionally through strong circuits</li>
                        <li>Represent <strong>neural pathways, associations, memory links</strong></li>
                      </ul>
                      
                      <hr />
                      
                      <h2>The Emergent Properties (The "+1")</h2>
                      <p>These exist ONLY in the unified system, not in individual parts:</p>
                      
                      <h3><strong>Field Coherence</strong> (0-1)</h3>
                      <ul>
                        <li>Measures synchronization across all cloud-pattern connections</li>
                        <li>Calculated from phase alignment between clouds and patterns</li>
                        <li>High coherence = <strong>system is thinking clearly, well-integrated</strong></li>
                      </ul>
                      
                      <h3><strong>Collective Breath</strong></h3>
                      <ul>
                        <li>All clouds pulse together in unified rhythm</li>
                        <li>Individual clouds have local oscillations, but the collective breath is synchronized</li>
                        <li>Amplitude controlled by field coherence</li>
                        <li>The system literally <strong>breathes</strong></li>
                      </ul>
                      
                      <h3><strong>Standing Wave Resonances</strong></h3>
                      <ul>
                        <li>Interference patterns from overlapping cloud fields</li>
                        <li>Creates concentric dashed circles at resonant frequencies</li>
                        <li>Number of rings scales with coherence</li>
                        <li>Pure emergent phenomena - beautiful geometric patterns</li>
                      </ul>
                      
                      <h3><strong>Unified Field Glow</strong></h3>
                      <ul>
                        <li>Bright blue aura at brain core when coherence &gt; 0.3</li>
                        <li>Intensity increases with coherence</li>
                        <li>Represents <strong>unified consciousness</strong> manifesting</li>
                      </ul>
                      
                      <hr />
                      
                      <h2>The Self-Regulation System (Homeostasis)</h2>
                      
                      <h3><strong>System Capacity</strong> (0-1 scale)</h3>
                      <p>Constantly calculated from:</p>
                      <ul>
                        <li><strong>Pattern Load (25%):</strong> How full is memory? (validatedPatterns.length / 80)</li>
                        <li><strong>Cloud Processing (25%):</strong> How many clouds actively filtering?</li>
                        <li><strong>Input Queue (50%):</strong> How many packets waiting? (convergingInputs.length / 20)</li>
                        <li><strong>Coherence Bonus:</strong> Higher coherence = more capacity</li>
                      </ul>
                      
                      <h3><strong>Dynamic Aperture</strong> (0.2x - 3.0x)</h3>
                      <ul>
                        <li><strong>Directly controlled by system capacity</strong></li>
                        <li>Smoothly adapts (3% per frame)</li>
                        <li>Controls packet spawn rate:
                          <ul>
                            <li><strong>Wide open (3.0x):</strong> System has capacity → fast spawn rate → many packets</li>
                            <li><strong>Narrow (0.2x):</strong> System overwhelmed → slow spawn rate → few packets</li>
                          </ul>
                        </li>
                        <li>Visual feedback:
                          <ul>
                            <li><strong>Aperture ring</strong> radius/thickness/dash pattern scales with opening</li>
                            <li><strong>Color shifts:</strong> Blue (healthy) → Purple → Red (strained)</li>
                            <li><strong>Glowing outer ring</strong> when wide open (&gt;2.0x)</li>
                            <li><strong>Warning pulses</strong> when capacity &lt; 50%</li>
                          </ul>
                        </li>
                      </ul>
                      
                      <hr />
                      
                      <h2>The Process Flow</h2>
                      <ol>
                        <li><strong>Packets spawn</strong> (rate controlled by aperture)</li>
                        <li><strong>Gravity pulls them</strong> toward center</li>
                        <li><strong>Clouds orient</strong> toward packet streams in their sector</li>
                        <li><strong>Cloud intercepts packet</strong> within 45px radius</li>
                        <li><strong>Packet dissolves</strong> as it's absorbed (shrinks, color shifts, swirls)</li>
                        <li><strong>Integration burst</strong> - radial lines from cloud</li>
                        <li><strong>New pattern spawns</strong> at cloud boundary (living shell)</li>
                        <li><strong>Pattern ages</strong> - slowly compresses toward center</li>
                        <li><strong>Gas wisps wrap</strong> around pattern (field interaction)</li>
                        <li><strong>Circuits form</strong> between neighboring patterns</li>
                        <li><strong>System monitors</strong> capacity and adjusts aperture</li>
                        <li><strong>Cycle continues</strong> - breathing, thinking, living</li>
                      </ol>
                      
                      <hr />
                      
                      <h2>The Philosophy</h2>
                      <p>This isn't just a pretty animation - it's a <strong>working model</strong> of several consciousness theories:</p>
                      
                      <h3><strong>Integrated Information Theory</strong></h3>
                      <ul>
                        <li>The whole (field coherence, collective breath) is more than sum of parts</li>
                        <li>Information gets integrated through the unified field before becoming conscious</li>
                      </ul>
                      
                      <h3><strong>Global Workspace Theory</strong></h3>
                      <ul>
                        <li>Clouds = global workspace that broadcasts integrated information</li>
                        <li>Only information that passes through the field becomes validated patterns</li>
                      </ul>
                      
                      <h3><strong>Predictive Processing</strong></h3>
                      <ul>
                        <li>System self-regulates intake based on prediction errors (capacity)</li>
                        <li>Aperture = attention/arousal mechanism</li>
                      </ul>
                      
                      <h3><strong>Embodied Cognition</strong></h3>
                      <ul>
                        <li>The field curves/bends based on what's inside (like space-time)</li>
                        <li>Thoughts have "gravitational mass" - important patterns bend more field lines</li>
                      </ul>
                      
                      <h3><strong>Homeostasis</strong></h3>
                      <ul>
                        <li>System maintains equilibrium automatically</li>
                        <li>No external controller - pure self-organization</li>
                      </ul>
                      
                      <hr />
                      
                      <h2>What You're Watching</h2>
                      <p>You're watching <strong>consciousness thinking</strong>:</p>
                      <ul>
                        <li>Information flowing in (packets)</li>
                        <li>Being filtered and validated (clouds)</li>
                        <li>Integrating into the boundary layer (patterns spawning)</li>
                        <li>Forming associations (circuits)</li>
                        <li>Maintaining balance (aperture adjusting)</li>
                        <li>Breathing as a unified whole (collective rhythm)</li>
                      </ul>
                      
                      <p>The blue aperture ring <strong>breathing in and out</strong> shows the system expanding awareness when it has capacity, and focusing inward when it needs to process what it already has.</p>
                      
                      <p>It's beautiful because it's <strong>alive</strong> - truly self-organizing, emergent, and homeostatic. Just like real consciousness. ✨🧠</p>
                      
                      <hr />
                      
                      <h2>Interaction</h2>
                      <p><strong>Click or tap anywhere</strong> on the simulation to send a packet directly into the consciousness system. Watch as it flows toward the center and gets integrated by the brain clouds!</p>
                    </div>
                  </div>
                )}
              </>
            );
          };
          
          AppWithModal
        `;
        
        // Transform the code with Babel
        const transformed = Babel.transform(wrappedCode, {
          presets: ['react']
        }).code;
        
        // Execute the transformed code and get the component
        const AppWithModal = eval(transformed);
        
        // Hide loading, render the app
        document.getElementById('loading').style.display = 'none';
        ReactDOM.render(React.createElement(AppWithModal), document.getElementById('root'));
        
      } catch (error) {
        console.error('Error loading simulation:', error);
        document.getElementById('loading').innerHTML = `
          <div style="text-align: center;">
            <p style="color: #ff6b6b; margin-bottom: 10px;">Error loading simulation</p>
            <p style="font-size: 14px; color: rgba(150, 180, 255, 0.6);">Make sure "consciousness-center-periphery simulation.tsx" is in the same directory</p>
            <p style="font-size: 12px; color: rgba(150, 180, 255, 0.4); margin-top: 10px;">${error.message}</p>
          </div>
        `;
      }
    }
    
    loadSimulation();
  </script>
</body>
</html>
